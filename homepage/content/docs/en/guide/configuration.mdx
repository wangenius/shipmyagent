---
title: Configuration
description: Deep dive into ship.json and Agent.md configuration
---

# Configuration

## ship.json

`ship.json` is the main configuration file for ShipMyAgent, controlling the Agent's capabilities and behavior boundaries.

### Complete Example

```json
{
  "$schema": "./.ship/schema/ship.schema.json",
  "name": "my-agent",
  "version": "1.0.0",
  "start": {
    "port": 3000,
    "host": "0.0.0.0",
    "interactiveWeb": false,
    "interactivePort": 3001
  },
  "llm": {
    "provider": "custom",
    "model": "${LLM_MODEL}",
    "baseUrl": "${LLM_BASE_URL}",
    "apiKey": "${LLM_API_KEY}",
    "temperature": 0.7
  },
  "adapters": {
    "telegram": {
      "enabled": true,
      "botToken": "${TELEGRAM_BOT_TOKEN}",
      "chatId": "${TELEGRAM_CHAT_ID}",
      "followupWindowMs": 600000,
      "groupAccess": "initiator_or_admin"
    },
    "feishu": {
      "enabled": true,
      "appId": "${FEISHU_APP_ID}",
      "appSecret": "${FEISHU_APP_SECRET}",
      "domain": "https://open.feishu.cn",
      "adminUserIds": ["ou_xxx", "ou_yyy"]
    },
    "qq": {
      "enabled": false,
      "appId": "${QQ_APP_ID}",
      "appSecret": "${QQ_APP_SECRET}",
      "sandbox": false
    }
  },
  "skills": {
    "paths": [".claude/skills"]
  }
}
```

### Field Explanation

#### `$schema` (Schema Reference)

- **$schema**: Points to the JSON Schema file path for IDE auto-completion and configuration validation.

#### `name` and `version`

- **name**: Agent project name to identify your Agent application.
- **version**: Agent version number, semantic versioning is recommended.

#### `start` (Startup Configuration)

Controls the Agent service startup parameters:

- **port**: Port number for the Agent service to listen on (default `3000`).
- **host**: Host address to bind the service, `0.0.0.0` means allow external access.
- **interactiveWeb**: Whether to enable interactive web interface (default `false`).
- **interactivePort**: Port for the interactive web interface (default `3001`).

#### `llm` (Language Model)

- **provider**: LLM provider, options: `anthropic`, `openai`, `deepseek`, `custom`.
- **model**: Specific model name, supports environment variable `${LLM_MODEL}`.
- **baseUrl**: API base URL, supports environment variable `${LLM_BASE_URL}`.
- **apiKey**: API key, **strongly recommended** to use `${ENV_VAR}` to reference environment variables to avoid leakage.
- **temperature**: Temperature parameter, controls generation randomness (between 0-1, default `0.7`).

#### `adapters` (Adapters)

Configure integration adapters for various platforms to deploy your Agent on different chat platforms:

**telegram** (Telegram Bot)
- **enabled**: Whether to enable the adapter
- **botToken**: Bot Token, supports environment variables
- **chatId**: (Optional) Specify allowed chat ID
- **followupWindowMs**: (Optional) Followup window duration, default 10 minutes
- **groupAccess**: (Optional) Group chat access control, `"initiator_or_admin"` or `"anyone"`

**feishu** (Feishu/Lark Bot)
- **enabled**: Whether to enable the adapter
- **appId**: Feishu application ID
- **appSecret**: Feishu application secret
- **domain**: (Optional) API domain, default `https://open.feishu.cn`, use `https://open.larksuite.com` for international version
- **adminUserIds**: (Optional) Admin user ID whitelist

**qq** (QQ Official Bot)
- **enabled**: Whether to enable the adapter
- **appId**: QQ application ID
- **appSecret**: QQ application secret
- **sandbox**: (Optional) Whether to use sandbox environment, default `false`

> For detailed configuration and integration guides, please refer to [Integration Guide](/en/docs/guide/integrations).

#### `skills` (Skills)

Configure available skill plugins for the Agent:

- **paths**: Array of search paths for skill files, supports relative and absolute paths.
  - Recommended to use `.claude/skills` or `.ship/skills` directory to store skill files.
  - Supports mixing built-in skills and custom skills.

> For detailed skill development guide, please refer to [Skill System](/en/docs/guide/skills).

#### `context` (Context)

Controls how much "conversation history" is injected at each execution and Chat scheduling strategy.

- **context.history**: Each `chatKey` maintains a continuously growing `UIMessage[]` as the unique history (stored in `.ship/chat/<encodedChatKey>/messages/history.jsonl`), and automatically compacts when exceeding context window.
  - **keepLastMessages**: Number of recent messages to keep after compact (default `30`)
  - **maxInputTokensApprox**: Input budget (approximate token count, used to trigger compact early, default `12000`)
  - **archiveOnCompact**: Whether to archive collapsed original segments during compact (default `true`)
- **context.chatQueue**: Scheduler divided by `chatKey` lanes (serial for same chatKey, concurrent for different chatKeys; supports "fast correction merge").

## Agent.md

`Agent.md` is the carrier of the System Prompt. It determines the Agent's "Personality" and "Professional Ethics".

### Writing Tips

#### 1. Define Role

```markdown
# Agent Role

You are a senior frontend architect, focusing on React performance optimization.
```

#### 2. Set Goals

```markdown
## Goals

- Review all new component code submissions.
- Ensure no unnecessary re-renders are introduced.
- Keep component code concise and reusable.
```

#### 3. Set Constraints

```markdown
## Constraints

- Never modify dependency versions in `package.json`.
- All CSS styles must use Tailwind class names, inline styles are prohibited.
- You must explain the reason before modifying code.
```

#### 4. Provide Context

You can write important project specifications and code style guides directly in `Agent.md`, and the Agent will bear these rules in mind during every conversation.
