---
title: Logs & Debugging
description: Understanding and using ShipMyAgent logs
---

# Logs & Debugging

Effective debugging starts with understanding logs. This guide shows you how to access, interpret, and use ShipMyAgent logs.

## Log Locations

Logs are stored in the `.ship/` directory of your project:

```
.ship/
├── logs/
│   └── <YYYY-MM-DD>.jsonl  # Unified JSONL logs (system + agent + LLM)
└── chats/                  # Chat messages (jsonl, with archives)
```

## Viewing Logs

### Direct File Access

```bash
# Follow today's unified log file
tail -f .ship/logs/$(date +%F).jsonl

# Search by keywords
grep -i "error\\|warn\\|approval\\|llm" .ship/logs/$(date +%F).jsonl

# Pretty-print recent JSONL entries (requires jq)
tail -50 .ship/logs/$(date +%F).jsonl | jq -c '{timestamp, type, message}'
```

## Log Levels

ShipMyAgent uses standard log levels:

| Level | Description | Example |
|-------|-------------|---------|
| **ERROR** | Errors that prevent operation | API failures, permission errors |
| **WARN** | Warnings that don't stop operation | Deprecated config, retry attempts |
| **INFO** | General information | Agent started, task completed |
| **DEBUG** | Detailed diagnostic info | Function calls, variable values |

### Setting Log Level

ShipMyAgent currently writes structured JSONL logs to `.ship/logs/<YYYY-MM-DD>.jsonl`.

For LLM request logging (may include system + messages), you can toggle:

- `SMA_LOG_LLM_MESSAGES=0` to disable request logging
- `SMA_LOG_LLM_PAYLOAD=1` to include full JSON payload in log metadata (more sensitive)

## Interpreting Log Messages

### Log Format

Each log entry follows this format:

```
[2024-01-15 14:30:45] [INFO] [AGENT] Agent started successfully
│                        │      │       │
│                        │      │       └─ Component (AGENT, TASK, TELEGRAM)
│                        │      └─ Level (INFO, WARN, ERROR, DEBUG)
│                        └─ Timestamp
└─ Date and time
```

### Common Log Patterns

#### 1. Successful Startup

```
[2024-01-15 14:30:45] [INFO] [AGENT] Starting ShipMyAgent v1.0.0
[2024-01-15 14:30:45] [INFO] [CONFIG] Loading config from /path/to/ship.json
[2024-01-15 14:30:45] [INFO] [LLM] Connected to Anthropic API
[2024-01-15 14:30:46] [INFO] [TELEGRAM] Telegram bot connected (@my_bot)
[2024-01-15 14:30:46] [INFO] [AGENT] Agent started successfully
```

#### 2. LLM API Error

```
[2024-01-15 14:35:10] [ERROR] [LLM] API request failed: 401 Unauthorized
[2024-01-15 14:35:10] [ERROR] [LLM] Check your API key in ship.json
[2024-01-15 14:35:10] [DEBUG] [LLM] Response: {"error":{"message":"invalid credentials"}}
```

#### 3. Permission Error

```
[2024-01-15 14:40:22] [WARN] [PERMISSION] Write access denied for file: secret.key
[2024-01-15 14:40:22] [INFO] [PERMISSION] Requesting approval via Telegram
[2024-01-15 14:40:25] [INFO] [PERMISSION] Approval received from user:123456
[2024-01-15 14:40:25] [INFO] [FILE] Successfully wrote to secret.key
```

#### 4. Task Execution

```
[2024-01-15 18:00:00] [INFO] [TASK] Executing task: daily-report
[2024-01-15 18:00:01] [INFO] [TASK] Task started: daily-report
[2024-01-15 18:00:15] [INFO] [LLM] Sending prompt to LLM (256 tokens)
[2024-01-15 18:00:22] [INFO] [TASK] Task completed successfully
[2024-01-15 18:00:22] [INFO] [NOTIFY] Sent result to Telegram
```

## Debugging Mode

To debug, keep the agent running and follow today’s unified JSONL log:

```bash
shipmyagent start
tail -f .ship/logs/$(date +%F).jsonl
```

### Debug Output Example

```
[DEBUG] [HTTP] Incoming request: POST /api/chat
[DEBUG] [HTTP] Request body: {"message":"hello"}
[DEBUG] [LLM] Constructing prompt...
[DEBUG] [LLM] Prompt: "You are a helpful assistant..."
[DEBUG] [LLM] Sending to API: https://api.anthropic.com/v1/messages
[DEBUG] [HTTP] Response status: 200
[DEBUG] [LLM] Response: {"content":"Hello! How can I help?"}
[DEBUG] [HTTP] Sending response: 200
```

## Common Debugging Scenarios

### Scenario 1: Agent won't start / exits immediately

```bash
# Confirm required files exist
ls -la Agent.md ship.json

# Check today's unified logs
tail -200 .ship/logs/$(date +%F).jsonl
```

Common things to look for in `.ship/logs/<YYYY-MM-DD>.jsonl`:
- missing/invalid `ship.json`
- missing API key (or `${...}` not resolved)
- provider/model mismatch

### Scenario 2: A chat message is not being processed

```bash
# Confirm the message was persisted
ls -la .ship/chats

# Inspect the most recent chat log entries (replace with your chatKey)
tail -50 .ship/chats/<encode(chatKey)>.jsonl

# Check today's unified logs for runtime errors
tail -200 .ship/logs/$(date +%F).jsonl
```

### Scenario 3: Telegram not responding

```bash
# Search today’s unified log for Telegram-related lines
grep -i "telegram\\|webhook\\|getUpdates\\|409\\|conflict" .ship/logs/$(date +%F).jsonl | tail -100
```

### Scenario 4: Debugging LLM calls

By default, ShipMyAgent logs outgoing LLM requests and the AI SDK response messages.

To disable LLM request logging:

```bash
SMA_LOG_LLM_MESSAGES=0 shipmyagent start
```

To include full JSON payload metadata (more sensitive):

```bash
SMA_LOG_LLM_PAYLOAD=1 shipmyagent start
```

## JSONL log analysis (jq)

```bash
# Show the most recent 50 entries as a compact summary
tail -50 .ship/logs/$(date +%F).jsonl | jq -c '{timestamp, type, message}'

# Only errors
jq -c 'select(.type == "error") | {timestamp, message, details}' .ship/logs/$(date +%F).jsonl | tail -200

```

## Retention / cleanup

ShipMyAgent writes one log file per day under `.ship/logs/`. If you need to clean up old logs:

```bash
ls -la .ship/logs
rm .ship/logs/2023-*.jsonl
```
