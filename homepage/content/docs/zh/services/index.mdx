---
title: é›†æˆ
description: å°† ShipMyAgent ä¸å¤–éƒ¨æœåŠ¡å’Œå·¥å…·è¿æ¥
---

# é›†æˆ

é€šè¿‡é›†æˆ GitHubã€Slack å’Œè‡ªå®šä¹‰ webhook ç­‰å¤–éƒ¨æœåŠ¡æ¥æ‰©å±• ShipMyAgentã€‚

## æ¦‚è¿°

é›†æˆå…è®¸ ShipMyAgentï¼š
- æ¥æ”¶é€šçŸ¥å’Œå‘½ä»¤
- å‘é€è‡ªåŠ¨æ›´æ–°
- ä¸å¤–éƒ¨ API äº¤äº’
- è§¦å‘å…¶ä»–å·¥å…·ä¸­çš„å·¥ä½œæµç¨‹

## å¯ç”¨é›†æˆ

- [Web ç•Œé¢](#web-ç•Œé¢) - äº¤äº’å¼æµè§ˆå™¨æ§åˆ¶å°
- [Telegram](/docs/services/telegram) - èŠå¤©å’Œé€šçŸ¥
- [é£ä¹¦æœºå™¨äºº](/docs/services/feishu) - ç¾¤èŠ/ç§èŠå¯¹è¯ä¸é€šçŸ¥
- [QQ æœºå™¨äºº](/docs/services/qq) - ç¾¤èŠ/ç§èŠå¯¹è¯ä¸é€šçŸ¥
- [GitHub](#github) - PR è‡ªåŠ¨åŒ–å’Œ issue ç®¡ç†
- [Slack](#slack) - å›¢é˜Ÿé€šçŸ¥
- [Webhook](#webhook) - è‡ªå®šä¹‰é›†æˆ

---

## Web ç•Œé¢

ShipMyAgent å†…ç½®äº†ä¸€ä¸ªäº¤äº’å¼ Web ç•Œé¢ï¼Œè®©ä½ åœ¨æµè§ˆå™¨ä¸­è½»æ¾ç®¡ç†å’Œç›‘æ§ Agentã€‚

### åŠŸèƒ½ç‰¹æ€§

- ğŸ’¬ **Agent å¯¹è¯** - é€šè¿‡ Web ç•Œé¢ä¸ Agent è¿›è¡Œè‡ªç„¶è¯­è¨€å¯¹è¯
- ğŸ“‹ **å®¡æ‰¹ç®¡ç†** - æŸ¥çœ‹å’Œå¤„ç† Agent çš„å¾…å®¡æ‰¹æ“ä½œï¼ˆæ‰¹å‡†/æ‹’ç»ï¼‰
- ğŸ“Š **ç³»ç»ŸçŠ¶æ€** - å®æ—¶æŸ¥çœ‹ Agent è¿è¡ŒçŠ¶æ€ã€ä»»åŠ¡æ•°é‡ã€å¾…å®¡æ‰¹æ•°é‡
- ğŸ“ **æ—¥å¿—æŸ¥çœ‹** - æŸ¥çœ‹æœ€è¿‘çš„è¿è¡Œæ—¥å¿—

### å¿«é€Ÿå¼€å§‹

#### åŸºæœ¬ç”¨æ³•

```bash
# å¯åŠ¨äº¤äº’å¼ Web ç•Œé¢ï¼ˆé»˜è®¤ 3001 ç«¯å£ï¼‰
shipmyagent start --interactive-web
```

ä¹Ÿå¯ä»¥æŠŠå¯åŠ¨å‚æ•°å†™è¿› `ship.json` çš„ `start` å­—æ®µï¼Œç„¶åç›´æ¥è¿è¡Œ `shipmyagent .` / `shipmyagent start`ï¼š

```json
{
  "start": {
    "port": 3000,
    "host": "0.0.0.0",
    "interactiveWeb": true,
    "interactivePort": 3001
  }
}
```

è¿™å°†å¯åŠ¨ä¸¤ä¸ªæœåŠ¡ï¼š
- **ä¸» API æœåŠ¡å™¨**ï¼š`http://localhost:3000`
- **äº¤äº’å¼ Web ç•Œé¢**ï¼š`http://localhost:3001`

#### è‡ªå®šä¹‰ç«¯å£

```bash
# è‡ªå®šä¹‰ Web ç•Œé¢ç«¯å£
shipmyagent start --interactive-web --interactive-port 9001

# åŒæ—¶è‡ªå®šä¹‰ä¸¤ä¸ªç«¯å£
shipmyagent start -p 8080 --interactive-web --interactive-port 8081
```

#### è‡ªå®šä¹‰ä¸»æœº

```bash
# ç›‘å¬æ‰€æœ‰ç½‘ç»œæ¥å£ï¼ˆå›¢é˜Ÿè®¿é—®ï¼‰
shipmyagent start -h 0.0.0.0 --interactive-web

# åªç›‘å¬æœ¬åœ°ï¼ˆå¼€å‘ç¯å¢ƒï¼‰
shipmyagent start -h 127.0.0.1 --interactive-web
```

### æ¶æ„è¯´æ˜

äº¤äº’å¼ Web ç•Œé¢é‡‡ç”¨äº†**ä»£ç†æ¶æ„**ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Browser        â”‚
â”‚  (Web UI)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ HTTP
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Interactive Web Server     â”‚
â”‚  Port: 3001                 â”‚
â”‚  - æä¾›é™æ€æ–‡ä»¶ (HTML/CSS/JS)â”‚
â”‚  - ä»£ç† API è¯·æ±‚             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ ä»£ç†
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Main API Server            â”‚
â”‚  Port: 3000                 â”‚
â”‚  - æ ¸å¿ƒä¸šåŠ¡é€»è¾‘              â”‚
â”‚  - Agent Runtime            â”‚
â”‚  - æƒé™å¼•æ“                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

è¿™ç§æ¶æ„çš„ä¼˜åŠ¿ï¼š
- âœ… **éš”ç¦»æ€§** - Web UI å’Œ API æœåŠ¡åˆ†ç¦»ï¼Œäº’ä¸å½±å“
- âœ… **å®‰å…¨æ€§** - å¯ä»¥å•ç‹¬æ§åˆ¶ Web UI çš„è®¿é—®æƒé™
- âœ… **çµæ´»æ€§** - å¯ä»¥é€‰æ‹©æ€§åœ°å¯ç”¨/ç¦ç”¨ Web UI

### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

#### ä½¿ç”¨åå‘ä»£ç†

åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå»ºè®®ä½¿ç”¨ Nginx æˆ– Caddy ä½œä¸ºåå‘ä»£ç†ï¼š

```nginx
# Nginx é…ç½®ç¤ºä¾‹
server {
    listen 80;
    server_name agent.example.com;

    # Web UI
    location / {
        proxy_pass http://localhost:3001;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }

    # API
    location /api/ {
        proxy_pass http://localhost:3000/api/;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```

#### ä½¿ç”¨ PM2 ç®¡ç†è¿›ç¨‹

```bash
# ä½¿ç”¨ PM2 å¯åŠ¨
pm2 start "shipmyagent start --interactive-web" --name shipmyagent

# æŸ¥çœ‹çŠ¶æ€
pm2 status

# æŸ¥çœ‹æ—¥å¿—
pm2 logs shipmyagent

# è®¾ç½®å¼€æœºè‡ªå¯
pm2 startup
pm2 save
```

#### Systemd æœåŠ¡

åˆ›å»ºæœåŠ¡æ–‡ä»¶ `/etc/systemd/system/shipmyagent.service`ï¼š

```ini
[Unit]
Description=ShipMyAgent Runtime
After=network.target

[Service]
Type=simple
User=youruser
WorkingDirectory=/path/to/your/project
ExecStart=/usr/local/bin/shipmyagent start --interactive-web
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
```

å¯åŠ¨æœåŠ¡ï¼š

```bash
sudo systemctl daemon-reload
sudo systemctl enable shipmyagent
sudo systemctl start shipmyagent
sudo systemctl status shipmyagent
```

### æ•…éšœæ’æŸ¥

#### Web ç•Œé¢æ— æ³•è®¿é—®

1. **æ£€æŸ¥ç«¯å£æ˜¯å¦è¢«å ç”¨**
   ```bash
   lsof -i :3001
   ```

2. **æ£€æŸ¥é˜²ç«å¢™è®¾ç½®**
   ```bash
   # Ubuntu/Debian
   sudo ufw allow 3001

   # CentOS/RHEL
   sudo firewall-cmd --add-port=3001/tcp --permanent
   sudo firewall-cmd --reload
   ```

3. **æŸ¥çœ‹åº”ç”¨æ—¥å¿—**
   ```bash
   tail -f .ship/logs/$(date +%F).jsonl
   ```

#### API è¯·æ±‚å¤±è´¥

å¦‚æœ Web ç•Œé¢æ˜¾ç¤º"ä»£ç†è¯·æ±‚å¤±è´¥"ï¼š

1. ç¡®è®¤ä¸» API æœåŠ¡å™¨æ­£åœ¨è¿è¡Œ
   ```bash
   curl http://localhost:3000/health
   ```

2. æ£€æŸ¥ Web UI é…ç½®çš„ API åœ°å€æ˜¯å¦æ­£ç¡®
   - é»˜è®¤é…ç½®ä¸º `http://localhost:3000`
   - å¦‚æœä¿®æ”¹äº†ä¸»æœåŠ¡å™¨ç«¯å£ï¼Œéœ€è¦åœ¨å¯åŠ¨æ—¶æŒ‡å®šæ­£ç¡®çš„åœ°å€

### ä¸å…¶ä»–é›†æˆæ–¹å¼å¯¹æ¯”

| ç‰¹æ€§ | Telegram Bot | é£ä¹¦ Bot | **äº¤äº’å¼ Web** |
|------|------------|---------|---------------|
| è®¿é—®æ–¹å¼ | ç§»åŠ¨ç«¯/æ¡Œé¢ | ç§»åŠ¨ç«¯/æ¡Œé¢ | **æµè§ˆå™¨** |
| è®¾ç½®éš¾åº¦ | éœ€è¦ Bot Token | éœ€è¦åº”ç”¨å‡­è¯ | **å¼€ç®±å³ç”¨** |
| æ–‡ä»¶ä¸Šä¼  | âŒ | âŒ | âœ… |
| å®æ—¶é€šçŸ¥ | âœ… | âœ… | âŒ (éœ€åˆ·æ–°) |
| å›¢é˜Ÿåä½œ | å›°éš¾ | å›°éš¾ | **å®¹æ˜“** |
| æƒé™æ§åˆ¶ | æœ‰é™ | æœ‰é™ | **çµæ´»** |

---

## Telegram

åœ¨ Telegram ä¸Šä¸æ‚¨çš„ agent èŠå¤©å¹¶æ¥æ”¶é€šçŸ¥ã€‚

### è®¾ç½®

#### 1. åˆ›å»º Bot

1. æ‰“å¼€ Telegram å¹¶æœç´¢ [@BotFather](https://t.me/BotFather)
2. å‘é€ `/newbot` å‘½ä»¤
3. æŒ‰ç…§æç¤ºè®¾ç½®åç§°å’Œç”¨æˆ·å
4. å¤åˆ¶ **HTTP API Token**

#### 2. è·å–æ‚¨çš„ Chat ID

1. åœ¨ Telegram ä¸Šæœç´¢ [@userinfobot](https://t.me/userinfobot)
2. å‘é€ä»»ä½•æ¶ˆæ¯
3. å¤åˆ¶æ‚¨çš„æ•°å­— **User ID**

å¯¹äºç¾¤ç»„ï¼š
1. å°†æ‚¨çš„ bot æ·»åŠ åˆ°ç¾¤ç»„
2. åœ¨ç¾¤ç»„ä¸­å‘é€æ¶ˆæ¯
3. è®¿é—®ï¼š`https://api.telegram.org/bot<BOT_TOKEN>/getUpdates`
4. æ‰¾åˆ° `chat.id` å€¼

#### 3. åœ¨ ship.json ä¸­é…ç½®

```json
{
  "services": {
    "telegram": {
      "enabled": true,
      "botToken": "${TELEGRAM_BOT_TOKEN}",
      "chatId": "${TELEGRAM_CHAT_ID}"
    }
  }
}
```

### åŠŸèƒ½

#### èŠå¤©å‘½ä»¤

```
/start - å¼€å§‹äº¤äº’
/status - æ£€æŸ¥ agent çŠ¶æ€
/tasks - åˆ—å‡ºå®šæ—¶ä»»åŠ¡
/help - æ˜¾ç¤ºå¯ç”¨å‘½ä»¤
```

#### æ‰¹å‡†å·¥ä½œæµç¨‹

å½“ agent éœ€è¦å¯¹æ•æ„Ÿæ“ä½œçš„æ‰¹å‡†æ—¶ï¼š

```
ğŸ”” éœ€è¦æ‰¹å‡†

æ“ä½œï¼šå†™å…¥ src/config.js
æ›´æ”¹ï¼š+5 è¡Œï¼Œ-2 è¡Œ

å›å¤ï¼š
âœ… approve - å…è®¸æ“ä½œ
âŒ reject - æ‹’ç»æ“ä½œ
ğŸ“ modify - å»ºè®®æ›´æ”¹
```

---

## GitHub

è‡ªåŠ¨åŒ–æ‹‰å–è¯·æ±‚ã€é—®é¢˜å’Œä»“åº“ç®¡ç†ã€‚

### è®¾ç½®

#### 1. åˆ›å»ºä¸ªäººè®¿é—®ä»¤ç‰Œ

1. è½¬åˆ° GitHub è®¾ç½® â†’ å¼€å‘è€…è®¾ç½® â†’ ä¸ªäººè®¿é—®ä»¤ç‰Œ â†’ ä»¤ç‰Œï¼ˆç»å…¸ï¼‰
2. ç”Ÿæˆæ–°ä»¤ç‰Œï¼ˆç»å…¸ï¼‰
3. é€‰æ‹©èŒƒå›´ï¼š
   - `repo`ï¼ˆå®Œå…¨æ§åˆ¶ç§æœ‰ä»“åº“ï¼‰
   - `public_repo`ï¼ˆè®¿é—®å…¬å…±ä»“åº“ï¼‰
4. å¤åˆ¶ä»¤ç‰Œ

#### 2. åœ¨ ship.json ä¸­é…ç½®

```json
{
  "services": {
    "github": {
      "enabled": true,
      "token": "${GITHUB_TOKEN}",
      "repository": "owner/repo"
    }
  }
}
```

### åŠŸèƒ½

#### è‡ªåŠ¨åŒ– PR å®¡æŸ¥

```markdown
---
id: pr-review
name: PR å®¡æŸ¥ Bot
cron: "*/30 * * * *"
notify: ["telegram", "github"]
---

å®¡æŸ¥æ‰€æœ‰å¼€æ”¾çš„æ‹‰å–è¯·æ±‚å¹¶å‘å¸ƒè¯„è®ºã€‚
```

#### Issue åˆ†ç±»

```markdown
---
id: issue-triage
name: Issue åˆ†ç±»
cron: "0 */2 * * *"
---

å¯¹æ–°é—®é¢˜è¿›è¡Œåˆ†ç±»å¹¶åº”ç”¨æ ‡ç­¾ã€‚
```

### GitHub Actions é›†æˆ

åˆ›å»ºå·¥ä½œæµæ–‡ä»¶ï¼š`.github/workflows/agent-review.yml`

```yaml
name: Agent å®¡æŸ¥
on:
  pull_request:
    types: [opened, synchronize]

jobs:
  agent-review:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: è¿è¡Œ Agent å®¡æŸ¥
        run: shipmyagent tasks run pr-review
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
          ANTHROPIC_API_KEY: ${{ secrets.ANTHROPIC_API_KEY }}
```

---

## Slack

å‘æ‚¨çš„ Slack å·¥ä½œåŒºå‘é€é€šçŸ¥å’Œæ›´æ–°ã€‚

### è®¾ç½®

#### 1. åˆ›å»ºä¼ å…¥ Webhook

1. è½¬åˆ° https://api.slack.com/apps
2. åˆ›å»ºæ–°åº”ç”¨ â†’ "ä»é›¶å¼€å§‹"
3. å¯ç”¨"ä¼ å…¥ Webhooks"
4. ç‚¹å‡»"æ·»åŠ æ–° Webhook åˆ°å·¥ä½œåŒº"
5. é€‰æ‹©é¢‘é“å¹¶å¤åˆ¶ **Webhook URL**

#### 2. åœ¨ ship.json ä¸­é…ç½®

```json
{
  "services": {
    "slack": {
      "enabled": true,
      "webhook": "${SLACK_WEBHOOK_URL}",
      "channel": "#engineering",
      "username": "ShipMyAgent",
      "icon": ":robot_face:"
    }
  }
}
```

---

## Webhook

ç”¨äºè‡ªå®šä¹‰é›†æˆçš„é€šç”¨ webhook æ”¯æŒã€‚

### é…ç½®

```json
{
  "services": {
    "webhook": {
      "enabled": true,
      "url": "https://your-server.com/webhook",
      "method": "POST",
      "headers": {
        "Authorization": "Bearer ${WEBHOOK_TOKEN}",
        "Content-Type": "application/json"
      },
      "timeout": 5000,
      "retryAttempts": 3,
      "retryDelay": 1000
    }
  }
}
```

### Webhook è´Ÿè½½

ShipMyAgent å‘é€ JSON è´Ÿè½½ï¼š

```json
{
  "event": "task.completed",
  "timestamp": "2024-01-15T10:30:00Z",
  "task": {
    "id": "daily-report",
    "name": "æ¯æ—¥æŠ¥å‘Š"
  },
  "result": {
    "status": "success",
    "output": "ä»»åŠ¡æˆåŠŸå®Œæˆ...",
    "duration": 45000
  }
}
```

### äº‹ä»¶ç±»å‹

| äº‹ä»¶ | æè¿° |
|------|------|
| `task.started` | ä»»åŠ¡å¼€å§‹æ‰§è¡Œ |
| `task.completed` | ä»»åŠ¡æˆåŠŸå®Œæˆ |
| `task.failed` | ä»»åŠ¡å¤±è´¥ |
| `approval.requested` | éœ€è¦æ‰¹å‡† |
| `approval.granted` | æ‰¹å‡†å·²æˆäºˆ |
| `approval.denied` | æ‰¹å‡†è¢«æ‹’ç» |

---

## å¤šä¸ªé›†æˆ

ä¸€èµ·ä½¿ç”¨å¤šä¸ªé›†æˆï¼š

```json
{
  "services": {
    "telegram": {
      "enabled": true,
      "botToken": "${TELEGRAM_BOT_TOKEN}",
      "chatId": "${TELEGRAM_CHAT_ID}"
    },
    "github": {
      "enabled": true,
      "token": "${GITHUB_TOKEN}",
      "repository": "owner/repo"
    },
    "slack": {
      "enabled": true,
      "webhook": "${SLACK_WEBHOOK_URL}",
      "channel": "#alerts"
    }
  }
}
```

---

## æµ‹è¯•é›†æˆ

æµ‹è¯•æ¯ä¸ªé›†æˆï¼š

```bash
# æµ‹è¯• Telegram
shipmyagent test --service telegram

# æµ‹è¯• GitHub
shipmyagent test --service github

# æµ‹è¯•æ‰€æœ‰é›†æˆ
shipmyagent test --service all
```

---

## æ•…éšœæ’æŸ¥

### Telegram æ— å“åº”

1. **éªŒè¯ bot token**
2. **æ£€æŸ¥ chat ID**
3. **é‡å¯ agent**

### GitHub é›†æˆé—®é¢˜

1. **Token èŒƒå›´**ï¼šç¡®ä¿ä»¤ç‰Œå…·æœ‰æ‰€éœ€èŒƒå›´
2. **ä»“åº“è®¿é—®**ï¼šä»¤ç‰Œå¿…é¡»æœ‰æƒè®¿é—®ä»“åº“
3. **é€Ÿç‡é™åˆ¶**ï¼šGitHub æœ‰ API é€Ÿç‡é™åˆ¶

### Webhook å¤±è´¥

1. **æ£€æŸ¥ URL å¯è®¿é—®æ€§**
2. **éªŒè¯èº«ä»½éªŒè¯**
3. **æŸ¥çœ‹æ—¥å¿—**

---

## å®‰å…¨è€ƒè™‘

### ä¿æŠ¤ API Key

```bash
# âœ… è‰¯å¥½ - ç¯å¢ƒå˜é‡
export GITHUB_TOKEN="ghp_..."
export TELEGRAM_BOT_TOKEN="123456:..."

# âŒ ä¸å¥½ - ç¡¬ç¼–ç 
{
  "token": "ghp_1234567890"
}
```

### é™åˆ¶ Bot æƒé™

- ä»…æˆäºˆå¿…è¦çš„æƒé™
- ä¸º Telegram ä½¿ç”¨ç‰¹å®šçš„ `chatId`
- ä½¿ç”¨æœ‰èŒƒå›´çš„ GitHub ä»¤ç‰Œ
- è®¾ç½® webhook å¯†é’¥

---

## ä¸‹ä¸€æ­¥

- [é…ç½®](/docs/configuration) - é›†æˆè®¾ç½®è¯¦ç»†ä¿¡æ¯
- [ä»»åŠ¡](/docs/tasks) - ä½¿ç”¨é›†æˆè‡ªåŠ¨åŒ–
- [æœ€ä½³å®è·µ](/docs/best-practices) - å®‰å…¨æŒ‡å—
